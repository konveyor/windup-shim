metadata:
- description: "\n            This ruleset provides analysis for migration to Hibernate
    5.x.\n        "
  dependencies:
    addon:
    - id: org.jboss.windup.rules,windup-rules-javaee,2.4.0.Final
    - id: org.jboss.windup.rules,windup-rules-java,2.4.0.Final
  sourceTechnology:
  - id: hibernate
    versionRange: '[4,5)'
  - id: eap
    versionRange: '[6,7)'
  targetTechnology:
  - id: hibernate
    versionRange: '[5,)'
  - id: eap
    versionRange: '[7,8)'
  tag:
  - hibernate
  - configuration
rules:
  rule:
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.addFile{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.MetadataSources#addFile` instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.addFile()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.add({*})
    perform:
      hint:
      - message: There is no direct replacement for method `org.hibernate.cfg.Configuration#add()`.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.add()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.addXML{*}
    perform:
      hint:
      - message: There is no direct replacement for method `org.hibernate.cfg.Configuration#addXML`.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.addXML()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.addCacheableFile{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.MetadataSources#addCacheableFile` instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.addCacheableFile()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.addURL{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.MetadataSources#addURL` instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.addURL()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.addInputStream{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.MetadataSources#addInputStream` instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.addInputStream()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.addResource{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.MetadataSources#addResource` instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.addResource()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.addClass{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.MetadataSources#addClass` instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.addClass()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.addAnnotatedClass{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.MetadataSources#addAnnotatedClass` instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.addAnnotatedClass()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.addPackage{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.MetadataSources#addPackage` instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.addPackage()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.addJar{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.MetadataSources#addJar` instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.addJar()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.addDirectory{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.MetadataSources#addDirectory` instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.addDirectory()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.registerTypeContributor{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.MetadataBuilder#applyTypes` instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.registerTypeContributor()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.registerTypeOverride{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.MetadataBuilder#applyBasicType` instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.registerTypeOverride()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.setProperty{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.registry.StandardServiceRegistryBuilder#applySetting`
          instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.setProperty()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.setProperties{*}
    perform:
      hint:
      - message: There is no direct replacement.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.setProperties()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.addProperties{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.registry.StandardServiceRegistryBuilder#applySettings`
          instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.addProperties()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.setNamingStrategy{*}
    perform:
      hint:
      - message: "\n                        Historically Hibernate provided just a
          singular contract for applying a \"naming strategy\".\n                        Starting
          in 5.0 this has been split into 2 distinct contracts:\n\n                        *
          ImplicitNamingStrategy - is used whenever a table or column is not explicitly
          named to determine the name to use.\n                        * PhysicalNamingStrategy
          - is used to convert a \"logical name\" (either implicit or explicit) name
          of a table or column into a physical name (e.g. following corporate naming
          guidelines)\n\n                        Use methods `org.hibernate.boot.MetadataBuilder#setImplicitNamingStrategy(ImplicitNamingStrategy
          implicitNamingStrategy)` or\n                        `org.hibernate.boot.MetadataBuilder#setPhysicalNamingStrategy(PhysicalNamingStrategy
          physicalNamingStrategy)`\n                        instead of `public Configuration
          setNamingStrategy(NamingStrategy namingStrategy)()`\n                    "
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.setNamingStrategy()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.{configure}
    perform:
      hint:
      - message: Use `org.hibernate.boot.registry.StandardServiceRegistryBuilder#configure`
          instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.configure()
        category-id: optional
        effort: 1
    where:
    - matches:
      - pattern: (configure\([^)]*\))
      param: configure
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.setInterceptor{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.SessionFactoryBuilder#applyInterceptor` instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.setInterceptor()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.setEntityNotFoundDelegate{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.SessionFactoryBuilder#applyEntityNotFoundDelegate`
          instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.setEntityNotFoundDelegate()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.setSessionFactoryObserver{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.SessionFactoryBuilder#addSessionFactoryObservers`
          instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.setSessionFactoryObserver()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.hibernate.cfg.Configuration.setCurrentTenantIdentifierResolver{*}
    perform:
      hint:
      - message: Use `org.hibernate.boot.SessionFactoryBuilder#applyCurrentTenantIdentifierResolver`
          instead.
        link:
        - value: ""
          title: Changes in Configuration for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#re-purposing-of-configuration
        - value: ""
          title: Hibernate and JPA migration changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#hibernate_and_jpa_migration_changes
        tag:
        - hibernate
        - configuration
        title: Hibernate 5 - Deprecated method org.hibernate.cfg.Configuration.setCurrentTenantIdentifierResolver()
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - references: org.hibernate.metamodel.spi.{type}
    perform:
      hint:
      - message: Use `org.hibernate.boot.model.{type}` instead.
        link:
        - value: ""
          title: Hibernate 5 - Other changes to classes/packages
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#migration_hibernate_orm_changes_other_classes
        - value: ""
          title: Changes in Type handling for Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#type-handling
        tag:
        - hibernate
        title: Hibernate 5 - Moved method org.hibernate.metamodel.spi.{type}
        category-id: optional
        effort: 1
    where:
    - matches:
      - pattern: (TypeContributor|TypeContributions)
      param: type
  - when:
      javaclass:
      - references: org.hibernate.cfg.AnnotationConfiguration
    perform:
      hint:
      - message: "\n                    All functionality from `org.hibernate.cfg.AnnotationConfiguration`
          has been moved to `org.hibernate.cfg.Configuration`.\n                    "
        link:
        - value: ""
          title: Removed or deprecated types in Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#deprecations
        - value: ""
          title: Removed and Deprecated Classes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#migration_hibernate_orm_changes_deprecations
        tag:
        - hibernate
        title: Hibernate 5 - Removed class org.hibernate.cfg.AnnotationConfiguration
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - references: org.hibernate.id.{idclass}
    perform:
      hint:
      - message: Use `org.hibernate.id.enhanced.SequenceStyleGenerator` instead.
        link:
        - value: ""
          title: Removed and Deprecated Classes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#migration_hibernate_orm_changes_deprecations
        - value: ""
          title: Removed or deprecated types in Hibernate 5
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#deprecations
        tag:
        - hibernate
        title: Hibernate 5 - Removed deprecated class org.hibernate.id.{idclass}
        category-id: optional
        effort: 1
    where:
    - matches:
      - pattern: (TableGenerator|TableHiLoGenerator|SequenceGenerator|SequenceIdentityGenerator|SequenceHiLoGenerator)
      param: idclass
  - when:
      javaclass:
      - references: org.hibernate.hql.spi.{type}
    perform:
      hint:
      - message: Hibernate 5 moved `org.hibernate.hql.spi.{type}` class to new `org.hibernate.hql.spi.id`
          package.
        link:
        - value: ""
          title: Hibernate 5 Misc changes
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#misc
        tag:
        - hibernate
        title: Hibernate 5 - Moved class org.hibernate.hql.spi.{type}
        category-id: optional
        effort: 1
    where:
    - matches:
      - pattern: (MultiTableBulkIdStrategy|MultiTableBulkIdStrategy.DeleteHandler|MultiTableBulkIdStrategy.UpdateHandler|AbstractTableBasedBulkIdHandler|AbstractTableBasedBulkIdHandler.ProcessedWhereClause|TableBasedDeleteHandlerImpl|TableBasedUpdateHandlerImpl)
      param: type
  - when:
      javaclass:
      - references: org.hibernate.hql.spi.PersistentTableBulkIdStrategy
    perform:
      hint:
      - message: Hibernate 5 moved `org.hibernate.hql.spi.PersistentTableBulkIdStrategy`
          class to new `org.hibernate.hql.spi.id.persistent` package.
        link:
        - value: ""
          title: Other Hibernate ORM 5 changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#migration_hibernate_orm_changes_miscellaneous
        tag:
        - hibernate
        title: Hibernate 5 - Moved class org.hibernate.hql.spi.PersistentTableBulkIdStrategy
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - references: org.hibernate.hql.spi.TemporaryTableBulkIdStrategy
    perform:
      hint:
      - message: Hibernate 5 replaced `org.hibernate.hql.spi.TemporaryTableBulkIdStrategy`
          class with `org.hibernate.hql.spi.id.global.GlobalTemporaryTableBulkIdStrategy`
          and `org.hibernate.hql.spi.id.local.LocalTemporaryTableBulkIdStrategy`.
        link:
        - value: ""
          title: Other Hibernate ORM 5 changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#migration_hibernate_orm_changes_miscellaneous
        tag:
        - hibernate
        title: Hibernate 5 - Replaced class org.hibernate.hql.spi.TemporaryTableBulkIdStrategy
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - IMPLEMENTS_TYPE
        references: org.hibernate.integrator.spi.Integrator
    perform:
      hint:
      - message: "Hibernate 5 changed contract `org.hibernate.integrator.spi.Integrator`
          to account for bootstrap redesign.\n                    Check if you implement
          method `integrate(Configuration configuration, SessionFactoryImplementor
          sessionFactory, SessionFactoryServiceRegistry serviceRegistry)` which is
          no longer there.\n                    "
        link:
        - value: ""
          title: Hibernate 5 - Other changes to classes/packages
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#migration_hibernate_orm_changes_other_classes
        - value: ""
          title: Hibernate 5 Changed or Moved Contracts
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#changedmoved-contracts
        tag:
        - hibernate
        title: Hibernate 5 - Changed interface org.hibernate.integrator.spi.Integrator
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - references: org.hibernate.engine.jdbc.spi.JdbcServices
    perform:
      hint:
      - message: Hibernate 5 extracted new interface `org.hibernate.engine.jdbc.env.spi.JdbcEnvironment`
          from `org.hibernate.engine.jdbc.spi.JdbcServices`.
        link:
        - value: ""
          title: Hibernate 5 - Other changes to classes/packages
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#migration_hibernate_orm_changes_other_classes
        - value: ""
          title: Hibernate 5 Changed or Moved Contracts
          href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#changedmoved-contracts
        - value: ""
          title: Hibernate 5 JdbcEnvironment new API
          href: https://docs.jboss.org/hibernate/orm/5.0/javadocs/index.html?org/hibernate/engine/jdbc/env/spi/JdbcEnvironment.html
        tag:
        - hibernate
        title: Hibernate 5 - Changed class org.hibernate.engine.jdbc.spi.JdbcServices
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - IMPLEMENTS_TYPE
        references: org.hibernate.id.Configurable
    perform:
      hint:
      - message: Hibernate 5 changed the signature of `org.hibernate.id.Configurable#configure`
          method to accept `ServiceRegistry` rather than just `Dialect`
        link:
        - value: ""
          title: Hibernate 5 - Other changes to classes/packages
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#migration_hibernate_orm_changes_other_classes
        - value: ""
          title: Hibernate 5 Configurable API
          href: https://docs.jboss.org/hibernate/orm/5.0/javadocs/org/hibernate/id/Configurable.html#configure-org.hibernate.type.Type-java.util.Properties-org.hibernate.service.ServiceRegistry-
        tag:
        - hibernate
        title: Hibernate 5 - Changed signature org.hibernate.id.Configurable
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - IMPLEMENTS_TYPE
        references: org.hibernate.id.PersistentIdentifierGenerator
    perform:
      hint:
      - message: |-
          Since Hibernate 5, The `org.hibernate.id.PersistentIdentifierGenerator` extends new `org.hibernate.boot.model.relational.ExportableProducer` interface which will affect all `org.hibernate.id.PersistentIdentifierGenerator` implementations.
                              Therefore you need to implement additionally `ExportableProducer#registerExportables(org.hibernate.boot.model.relational.Database database)` method.
        link:
        - value: ""
          title: HIbernate 5 - Other changes to classes/packages
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#migration_hibernate_orm_changes_other_classes
        - value: ""
          title: Hibernate 5 Changed or Moved Contracts
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#migration_hibernate_orm_changes_miscellaneous
        - value: ""
          title: Hibernate 5 ExportableProducer API
          href: https://docs.jboss.org/hibernate/orm/5.0/javadocs/org/hibernate/boot/model/relational/ExportableProducer.html#registerExportables-org.hibernate.boot.model.relational.Database-
        tag:
        - hibernate
        title: Hibernate 5 - PersistentIdentifierGenerator implementations need to
          implement ExportableProducer#registerExportables
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - references: org.hibernate.envers.configuration.AuditConfiguration
    perform:
      hint:
      - message: Hibernate 5 removed `AuditConfiguration` in preference for new `org.hibernate.envers.boot.internal.EnversService`.
        link:
        - value: ""
          title: Other Hibernate ORM 5 changes
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#migration_hibernate_orm_changes_miscellaneous
        - value: ""
          title: Hibernate 5 EnversService API
          href: https://docs.jboss.org/hibernate/orm/5.0/javadocs/index.html?org/hibernate/envers/boot/internal/EnversService.html
        tag:
        - hibernate
        title: Hibernate 5 - Removed class org.hibernate.envers.configuration.AuditConfiguration
        category-id: optional
        effort: 1
  - when:
      or:
      - javaclass:
        - location:
          - INHERITANCE
          references: org.hibernate.spatial.dialect.{spatial}
        - location:
          - INHERITANCE
          references: org.hibernate.spatial.JTSGeometryJavaTypeDescriptor
        - location:
          - INHERITANCE
          references: org.hibernate.spatial.GeolatteGeometryJavaTypeDescriptor
        - location:
          - INHERITANCE
          references: org.hibernate.type.descriptor.java.{javatype}
        - location:
          - INHERITANCE
          references: org.hibernate.type.descriptor.sql.{sqltype}
        - location:
          - INHERITANCE
          references: org.hibernate.type.descriptor.converter.AttributeConverterSqlTypeDescriptorAdapter
        - location:
          - INHERITANCE
          references: org.hibernate.type.PostgresUUIDType.PostgresUUIDSqlTypeDescriptor
    perform:
      hint:
      - message: |-
          Built-in implementations of `org.hibernate.type.descriptor.sql.SqlTypeDescriptor` and `org.hibernate.type.descriptor.java.JavaTypeDescriptor` no longer
                                  auto-register themselves with `org.hibernate.type.descriptor.sql.SqlTypeDescriptorRegistry` and `org.hibernate.type.descriptor.java.JavaTypeDescriptorRegistry`.
                                  Applications using custom `SqlTypeDescriptor`/`JavaTypeDescriptor` implementations which extends the built-in ones and
                                  rely on that behavior should be updated to call `SqlTypeDescriptorRegistry#addDescriptor` or `JavaTypeDescriptorRegistry#addDescriptor` themselves.
                               This warning is important especially for users of Hibernate 4.3.
        link:
        - value: ""
          title: Hibernate 5 Type Handling
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.0/html-single/migration_guide/#migration_hibernate_orm_changes_type_handling
        - value: ""
          title: Hibernate 5 javadoc for SqlTypeDescriptorRegistry#addDescriptor
          href: https://docs.jboss.org/hibernate/orm/5.0/javadocs/index.html?org/hibernate/type/descriptor/sql/SqlTypeDescriptorRegistry.html
        - value: ""
          title: Hibernate 5 javadoc for JavaTypeDescriptorRegistry#addDescriptor
          href: https://docs.jboss.org/hibernate/orm/5.0/javadocs/index.html?org/hibernate/type/descriptor/java/JavaTypeDescriptorRegistry.html
        tag:
        - hibernate
        title: Hibernate 5 - Registration needed for built-in implementations of org.hibernate.type.descriptor.sql.SqlTypeDescriptor
        category-id: optional
        effort: 1
    where:
    - matches:
      - pattern: (mysql.MySQLGeometryTypeDescriptor | h2geodb.GeoDBGeometryTypeDescriptor
          | postgis.PGGeometryTypeDescriptor | oracle.SDOGeometryTypeDescriptor |
          sqlserver.SqlServer2008GeometryTypeDescriptor)
      param: spatial
    - matches:
      - pattern: (AbstractTypeDescriptor|BigDecimalTypeDescriptor|BigIntegerTypeDescriptor|BlobTypeDescriptor|BooleanTypeDescriptor|ByteArrayTypeDescriptor|ByteTypeDescriptor|CalendarDateTypeDescriptor|CalendarTimeTypeDescriptor|CalendarTypeDescriptor|CharacterArrayTypeDescriptor|CharacterTypeDescriptor|ClassTypeDescriptor|ClobTypeDescriptor|CurrencyTypeDescriptor|DateTypeDescriptor|DoubleTypeDescriptor|DurationJavaDescriptor|EnumJavaTypeDescriptor|FloatTypeDescriptor|InstantJavaDescriptor|IntegerTypeDescriptor|JavaTypeDescriptorRegistry.FallbackJavaTypeDescriptor|JdbcDateTypeDescriptor|JdbcTimestampTypeDescriptor|JdbcTimeTypeDescriptor|LocalDateTimeJavaDescriptor|LocalDateJavaDescriptor|LocaleTypeDescriptor|LocalTimeJavaDescriptor|LongTypeDescriptor|NClobTypeDescriptor|OffsetDateTimeJavaDescriptor|OffsetTimeJavaDescriptor|PrimitiveByteArrayTypeDescriptor|PrimitiveCharacterArrayTypeDescriptor|SerializableTypeDescriptor|ShortTypeDescriptor|StringTypeDescriptor|TimeZoneTypeDescriptor|UrlTypeDescriptor|UUIDTypeDescriptor|ZonedDateTimeJavaDescriptor)
      param: javatype
    - matches:
      - pattern: (BigIntTypeDescriptor|BinaryTypeDescriptor|BitTypeDescriptor|BlobTypeDescriptor|BooleanTypeDescriptor|CharTypeDescriptor|ClobTypeDescriptor|DateTypeDescriptor|DecimalTypeDescriptor|DoubleTypeDescriptor|FloatTypeDescriptor|IntegerTypeDescriptor|LongNVarcharTypeDescriptor|LongVarbinaryTypeDescriptor|LongVarcharTypeDescriptor|NCharTypeDescriptor|NClobTypeDescriptor|NumericTypeDescriptor|NVarcharTypeDescriptor|RealTypeDescriptor|SmallIntTypeDescriptor|SqlTypeDescriptorRegistry.ObjectSqlTypeDescriptor|TimestampTypeDescriptor|TimeTypeDescriptor|TinyIntTypeDescriptor|VarbinaryTypeDescriptor|VarcharTypeDescriptor)
      param: sqltype
  - when:
      javaclass:
      - location:
        - ANNOTATION
        references: javax.persistence.Entity
        as: java_entities
      - location:
        - RETURN_TYPE
        references: java.lang.Byte[]
        as: mappings
        from: java_entities
      - location:
        - RETURN_TYPE
        references: byte[]
        as: mappings2
        from: java_entities
      filecontent:
      - pattern: org.hibernate.dialect.Oracle12cDialect
        filename: '{*}.{extension}'
        as: config_files
    perform:
      iteration:
      - hint:
        - message: "\n                            Previous versions of Hibernate have
            mapped `byte[]` and `Byte[]` to Oracle’s `LONG RAW` data type (via the
            JDBC `LONGVARBINARY` type). Oracle have deprecated the `LONG RAW` data
            type for many releases - possibly as far back as 8i.\n\n                            Therefore
            it was decided to start having Hibernate map `byte[]` and `Byte[]` to
            `BLOB` for Oracle.\n\n                            However, in the interest
            of backwards compatibility and not breaking existing applications it was
            also decided to limit this change to just the `Oracle12cDialect`. So starting
            in 5.1 applications using `Oracle12cDialect` and implicitly mapping `byte[]`
            and `Byte[]` values will start seeing those handled as `BLOB` data rather
            than `LONG RAW` data.\n                            For existing applications
            that want to continue to use `Oracle12cDialect` and still continue to
            implicitly map `byte[]` and `Byte[]` attributes to `LONG RAW`, there is
            a new configuration setting you can use to enable that: `hibernate.dialect.oracle.prefer_longvarbinary`,
            which is `false `by default (map to `BLOB`).\n                        "
          link:
          - value: ""
            title: Oracle Byte Array Mapping Changes
            href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#migration-from-503final-to-508final
          tag:
          - Hibernate
          title: Hibernate 5  - Oracle12cDialect maps byte[] and Byte[] to BLOB
          category-id: mandatory
          effort: 1
        over: mappings
      - hint:
        - message: "\n                            Previous versions of Hibernate have
            mapped `byte[]` and `Byte[]` to Oracle’s `LONG RAW` data type (via the
            JDBC `LONGVARBINARY` type). Oracle have deprecated the `LONG RAW` data
            type for many releases - possibly as far back as 8i.\n\n                            Therefore
            it was decided to start having Hibernate map `byte[]` and `Byte[]` to
            `BLOB` for Oracle.\n\n                            However, in the interest
            of backwards compatibility and not breaking existing applications it was
            also decided to limit this change to just the `Oracle12cDialect`. So starting
            in 5.1 applications using `Oracle12cDialect` and implicitly mapping `byte[]`
            and `Byte[]` values will start seeing those handled as `BLOB` data rather
            than `LONG RAW` data.\n                            For existing applications
            that want to continue to use `Oracle12cDialect` and still continue to
            implicitly map `byte[]` and `Byte[]` attributes to `LONG RAW`, there is
            a new configuration setting you can use to enable that: `hibernate.dialect.oracle.prefer_longvarbinary`,
            which is `false `by default (map to `BLOB`).\n                        "
          link:
          - value: ""
            title: Oracle Byte Array Mapping Changes
            href: https://github.com/hibernate/hibernate-orm/blob/5.0/migration-guide.adoc#migration-from-503final-to-508final
          tag:
          - Hibernate
          title: Hibernate 5  - Oracle12cDialect maps byte[] and Byte[] to BLOB
          category-id: mandatory
          effort: 1
        over: mappings2
    where:
    - matches:
      - pattern: (java|properties|xml)
      param: extension
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: '{param_classes_setfirstresult}.setFirstResult(int)'
      xmlfile:
      - namespace:
        - value: ""
          prefix: s
          uri: http://xmlns.jcp.org/xml/ns/persistence
        as: dialects_used
        matches: //s:property[@name='hibernate.dialect' and windup:matches(@value,
          'org.hibernate.dialect.{param_dialects}')]
    perform:
      iteration:
      - hint:
        - message: If the migration is from JBoss EAP 6 or Hibernate 4 then the dialect
            {param_dialects} does not support limit offset therefore as `setFirstResult`
            is used then `hibernate.legacy_limit_handler=true` is mandatory.
          link:
          - value: ""
            title: 'Red Hat JBoss EAP 7.2: Migrating from Hibernate ORM 4.3 to Hibernate
              ORM 5.3'
            href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.2/html-single/migration_guide/#migrating_from_hibernate_5_1_to_5_3
          tag:
          - hibernate
          title: Hibernate 5.3 - Dialects not supporting Limit Offset
          category-id: mandatory
          effort: 1
        over: dialects_used
    where:
    - matches:
      - pattern: javax.persistence.Query|org.hibernate.Query|org.hibernate.Criteria
      param: param_classes_setfirstresult
    - matches:
      - pattern: Cache71Dialect|DB2390Dialect|InformixDialect|IngresDialect|RDMSOS2200Dialect|SQLServerDialect|TimesTenDialect
      param: param_dialects
sourceFile: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/eap7/eap6/hibernate4.windup.xml
