metadata:
- description: "\n            This ruleset provides analysis of JBoss EAP 5 .java
    files that may require individual attention when migrating to JBoss EAP 6+.\n
    \       "
  dependencies:
    addon:
    - id: org.jboss.windup.rules,windup-rules-javaee,2.3.0.Final
    - id: org.jboss.windup.rules,windup-rules-java,2.3.0.Final
  sourceTechnology:
  - id: eap
    versionRange: '[5,6)'
  targetTechnology:
  - id: eap
    versionRange: '[6,7)'
  tag:
  - jboss-eap5
  - jms
  - ejb
rules:
  rule:
  - when:
      javaclass:
      - location:
        - ANNOTATION
        references: org.jboss.ejb3.annotation.Management
    perform:
      classification:
      - tag:
        - jmx
        title: JBoss EAP 5 JMX ManagementBean
        effort: 3
        issue-display-mode: all
  - when:
      javaclass:
      - location:
        - FIELD_DECLARATION
        - VARIABLE_DECLARATION
        references: javax.jms.QueueConnectionFactory
    perform:
      hint:
      - message: "\n                      \n                      `QueueConnectionFactory`
          was used to obtain connection to JMS queues.\n\n                      Replace
          the lookup string `QueueConnectionFactory` with `ConnectionFactory`.\n                      \n
          \                   "
        link:
        - value: ""
          title: JBoss EAP 6 - Messaging Configuration
          href: https://access.redhat.com/documentation/en-us/JBoss_Enterprise_Application_Platform/6.4/html/Administration_and_Configuration_Guide/sect-Configuration1.html#Configure_the_JMS_Server1
        - value: ""
          title: JavaEE 6 - JMS Interfaces
          href: https://docs.oracle.com/javaee/6/api/javax/jms/package-summary.html#package_description
        tag:
        - jms
        title: JMS legacy javax.jms.QueueConnectionFactory
        category-id: optional
        effort: 1
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.jboss{package}.Service
    perform:
      hint:
      - message: "\n                        The `@Service` annotation is one of JBoss
          EJB 3.0 extensions which creates a singleton EJB.\n                        To
          achieve the singleton nature of the `@Service` annotation, use the EJB3.1
          spec `@Singleton` bean\n                    "
        link:
        - value: ""
          title: How to use @Service and @Management annotations in JBoss EAP 6?
          href: https://access.redhat.com/solutions/196713
        - value: ""
          title: JBoss EAP 6 - Development Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/development_guide/#Implement_an_HA_Singleton
        - value: ""
          title: JBoss EJB 3.0 extensions
          href: https://docs.jboss.org/ejb3/docs/reference/build/reference/en/html/jboss_extensions.html
        - value: ""
          title: JBoss EJB 3.0 Javadoc
          href: https://docs.jboss.org/ejb3/embedded/api/org/jboss/annotation/ejb/package-summary.html
        tag:
        - ejb
        title: org.jboss{package}.Service
        category-id: mandatory
        effort: 3
    where:
    - matches:
      - pattern: (\.ejb3)?\.annotation(\.ejb)?
      param: package
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.jboss{package}.Management
    perform:
      hint:
      - message: "\n                        The `@Management` annotation is one of
          JBoss EJB 3.0 extensions which wraps the the bean\n                        as
          an MBean and install it in the JBoss MBean Server.\n                        To
          achieve the singleton nature of the `@Service` and `@Management` annotations,
          use the EJB3.1 spec `@Singleton` bean.\n                    "
        link:
        - value: ""
          title: How to use @Service and @Management annotations in JBoss EAP 6?
          href: https://access.redhat.com/solutions/196713
        - value: ""
          title: JBoss EAP 6 - Development Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/development_guide/#Implement_an_HA_Singleton
        - value: ""
          title: JBoss EJB 3.0 extensions
          href: https://docs.jboss.org/ejb3/docs/reference/build/reference/en/html/jboss_extensions.html
        - value: ""
          title: JBoss EJB 3.0 Javadoc
          href: https://docs.jboss.org/ejb3/embedded/api/org/jboss/annotation/ejb/package-summary.html
        tag:
        - ejb
        - jmx
        title: org.jboss{package}.Management
        category-id: mandatory
        effort: 3
    where:
    - matches:
      - pattern: (\.ejb3)?\.annotation(\.ejb)?
      param: package
  - when:
      javaclass:
      - location:
        - ANNOTATION
        references: org.jboss.annotation.ejb.LocalBinding
    perform:
      hint:
      - message: "\n                        The `@LocalBinding` annotation is one
          of JBoss EJB 3.0 extensions\n                        which specifies the
          local jndi binding for an EJB local interface.\n                        Migrate
          to `org.jboss.ejb3.annotation.LocalBinding`.\n                    "
        link:
        - value: ""
          title: JBoss EJB 3.0 extensions
          href: https://docs.jboss.org/ejb3/docs/reference/build/reference/en/html/jboss_extensions.html
        - value: ""
          title: JBoss EJB 3.0 Javadoc
          href: https://docs.jboss.org/ejb3/embedded/api/org/jboss/annotation/ejb/package-summary.html
        tag:
        - ejb
        quickfix:
        - replacement: org.jboss.ejb3.annotation.LocalBinding
          search: org.jboss.annotation.ejb.LocalBinding
          type: REPLACE
          name: LocalBinding
        title: org.jboss.annotation.ejb.LocalBinding
        category-id: mandatory
        effort: 3
  - when:
      javaclass:
      - location:
        - ANNOTATION
        references: org.jboss.annotation.ejb.Depends
    perform:
      hint:
      - message: "\n                        The `@Depends` annotation is one of JBoss
          EJB 3.0 extensions\n                        which specifies a deployment
          dependency for a bean.\n                        Validate that a JBoss EAP
          6 Dependency exists.\n                    "
        link:
        - value: ""
          title: JBoss EJB 3.0 extensions
          href: https://docs.jboss.org/ejb3/docs/reference/build/reference/en/html/jboss_extensions.html
        - value: ""
          title: JBoss EJB 3.0 Javadoc
          href: https://docs.jboss.org/ejb3/embedded/api/org/jboss/annotation/ejb/package-summary.html
        tag:
        - ejb
        title: org.jboss.annotation.ejb.Depends
        category-id: mandatory
        effort: 3
  - when:
      javaclass:
      - references: org.jboss.wsf.spi.annotation.{*}
    perform:
      hint:
      - message: "\n                        This package has been relocated to `org.jboss.ws.api.annotation`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.spi.annotation has been moved to org.jboss.ws.api.annotation
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.spi.binding.{*}
    perform:
      hint:
      - message: "\n                        This package has been relocated to `org.jboss.ws.api.binding`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.spi.binding has been moved to org.jboss.ws.api.binding
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.spi.management.recording.{*}
    perform:
      hint:
      - message: "\n                        This package has been relocated to `org.jboss.ws.api.monitoring`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.spi.management.recording has been moved to org.jboss.ws.api.monitoring
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.spi.tools.ant.{*}
    perform:
      hint:
      - message: "\n                        This package has been relocated to `org.jboss.ws.tools.ant`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.spi.tools.ant has been moved to org.jboss.ws.tools.ant
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.spi.tools.cmd.{*}
    perform:
      hint:
      - message: "\n                        This package has been relocated to `org.jboss.ws.tools.cmd`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.spi.tools.cmd has been moved to org.jboss.ws.tools.cmd
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.spi.tools.{*}
    perform:
      iteration:
      - when:
          not:
          - {}
        hint:
        - message: "\n                            This package has been relocated
            to `org.jboss.ws.api.tools` as specified in the\n                            migration
            guide.\n                        "
          link:
          - value: ""
            title: EAP 6 Migration Guide
            href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
          tag:
          - jbossws
          title: org.jboss.wsf.spi.tools has been moved to org.jboss.ws.api.tools
          category-id: mandatory
          effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.spi.util.ServiceLoader
    perform:
      hint:
      - message: "\n                        This class has been relocated to `org.jboss.ws.api.util.ServiceLoader`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.spi.util.ServiceLoader has been moved to org.jboss.ws.api.util.ServiceLoader
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.common.handler.{*}
    perform:
      hint:
      - message: "\n                        This package has been relocated to `org.jboss.ws.api.handler`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.common.handler has been moved to org.jboss.ws.api.handler
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.common.addressing.{*}
    perform:
      hint:
      - message: "\n                        This package has been relocated to `org.jboss.ws.api.addressing`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.common.addressing has been moved to org.jboss.ws.api.addressing
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.common.DOMUtils
    perform:
      hint:
      - message: "\n                        This class has been relocated to `org.jboss.ws.api.util.DOMUtils`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.wsf.common.DOMUtils has been moved to org.jboss.ws.api.util.DOMUtils
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - references: org.jboss.wsf.common.{*}
    perform:
      iteration:
      - when:
          not:
          - {}
        hint:
        - message: "\n                            This package has been relocated
            to `org.jboss.ws.common` as specified in the\n                            migration
            guide.\n                        "
          link:
          - value: ""
            title: EAP 6 Migration Guide
            href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
          tag:
          - jbossws
          title: org.jboss.wsf.common has been moved to org.jboss.ws.common
          category-id: mandatory
          effort: 1
  - when:
      javaclass:
      - references: org.jboss.ws.annotation.EndpointConfig
    perform:
      hint:
      - message: "\n                        This class has been relocated to `org.jboss.ws.api.annotation.EndpointConfig`
          as specified in the\n                        migration guide.\n                    "
        link:
        - value: ""
          title: EAP 6 Migration Guide
          href: https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/6.4/html-single/migration_guide/#sect-Web_Services_Changes
        tag:
        - jbossws
        title: org.jboss.ws.annotation.EndpointConfig has been moved to org.jboss.ws.api.annotation.EndpointConfig
        category-id: mandatory
        effort: 1
sourceFile: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/eap6/jboss-eap5/jboss-eap5-java.windup.xml
