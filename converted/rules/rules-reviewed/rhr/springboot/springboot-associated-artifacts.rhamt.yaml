metadata:
- description: "\n            Verify the version of the Spring Boot framework is compatible
    with those supported by Red Hat Runtimes\n        "
  dependencies:
    addon:
    - id: org.jboss.windup.rules,windup-rules-javaee,3.0.0.Final
    - id: org.jboss.windup.rules,windup-rules-java,3.0.0.Final
    - id: org.jboss.windup.rules,windup-rules-xml,3.0.0.Final
  sourceTechnology:
  - id: springboot
  targetTechnology:
  - id: rhr
rules:
  rule:
  - when:
      dependency:
      - groupId: org.amqphub.spring
        artifactId: amqp-10-jms-spring-boot-starter
        toVersion: 2.0.9
    perform:
      hint:
      - message: Check the links below for the Red Hat Runtimes supported version
          of AMQP SpringBoot starter
        link:
        - value: ""
          title: RHOAR Spring Boot Supported Configurations
          href: https://access.redhat.com/articles/3349341
        - value: ""
          title: RHOAR Component Details Overview
          href: https://access.redhat.com/articles/3348731
        title: Unsupported version of AMQP SpringBoot starter
        category-id: potential
        effort: 1
  - when:
      dependency:
      - groupId: org.apache.cxf
        artifactId: cxf-spring-boot-starter-jaxrs
    perform:
      hint:
      - message: Check the links below for the Red Hat Runtimes supported version
          of CXF JAXRS SpringBoot starter
        link:
        - value: ""
          title: RHOAR Spring Boot Supported Configurations
          href: https://access.redhat.com/articles/3349341
        - value: ""
          title: RHOAR Component Details Overview
          href: https://access.redhat.com/articles/3348731
        title: Unsupported version of CXF JAXRS SpringBoot starter
        category-id: potential
        effort: 1
  - when:
      dependency:
      - groupId: org.jboss.resteasy
        artifactId: resteasy-spring-boot-starter
        toVersion: 2.9.9
    perform:
      hint:
      - message: Check the links below for the Red Hat Runtimes supported version
          of Resteasy SpringBoot starter
        link:
        - value: ""
          title: RHOAR Spring Boot Supported Configurations
          href: https://access.redhat.com/articles/3349341
        - value: ""
          title: RHOAR Component Details Overview
          href: https://access.redhat.com/articles/3348731
        title: Unsupported version of Resteasy SpringBoot starter
        category-id: potential
        effort: 1
  - when:
      dependency:
      - groupId: org.infinispan
        artifactId: '{infinispanArtifactName}'
        toVersion: 2.1.2
    perform:
      hint:
      - message: Check the links below for the Red Hat Runtimes supported version
          of Infinispan SpringBoot starter
        link:
        - value: ""
          title: RHOAR Spring Boot Supported Configurations
          href: https://access.redhat.com/articles/3349341
        - value: ""
          title: RHOAR Component Details Overview
          href: https://access.redhat.com/articles/3348731
        title: Unsupported version of Infinispan SpringBoot starter
        category-id: potential
        effort: 1
    where:
    - matches:
      - pattern: (infinispan-spring-boot-starter-embedded|infinispan-spring-boot-starter-remote)
      param: infinispanArtifactName
  - when:
      dependency:
      - groupId: org.keycloak
        artifactId: keycloak-spring-boot-starter
        toVersion: 4.8.2
    perform:
      hint:
      - message: Check the links below for the Red Hat Runtimes supported version
          of Keycloak SpringBoot starter
        link:
        - value: ""
          title: RHOAR Spring Boot Supported Configurations
          href: https://access.redhat.com/articles/3349341
        - value: ""
          title: RHOAR Component Details Overview
          href: https://access.redhat.com/articles/3348731
        title: Unsupported version of Keycloak SpringBoot starter
        category-id: potential
        effort: 1
  - when:
      dependency:
      - groupId: me.snowdrop
        artifactId: narayana-spring-boot-starter
        toVersion: 2.0.9
    perform:
      hint:
      - message: Check the links below for the Red Hat Runtimes supported version
          of Narayana SpringBoot starter
        link:
        - value: ""
          title: RHOAR Spring Boot Supported Configurations
          href: https://access.redhat.com/articles/3349341
        - value: ""
          title: RHOAR Component Details Overview
          href: https://access.redhat.com/articles/3348731
        title: Unsupported version of Narayana SpringBoot starter
        category-id: potential
        effort: 1
  - when:
      dependency:
      - groupId: io.opentracing.contrib
        artifactId: opentracing-spring-jaeger-web-starter
        toVersion: 1.0.0
    perform:
      hint:
      - message: Check the links below for the Red Hat Runtimes supported version
          of OpenTracing Spring Jaeger SpringBoot web starter
        link:
        - value: ""
          title: RHOAR Spring Boot Supported Configurations
          href: https://access.redhat.com/articles/3349341
        - value: ""
          title: RHOAR Component Details Overview
          href: https://access.redhat.com/articles/3348731
        title: Unsupported version of OpenTracing Spring Jaeger SpringBoot web starter
        category-id: potential
        effort: 1
  - when:
      xmlfile:
      - namespace:
        - value: ""
          prefix: m
          uri: http://maven.apache.org/POM/4.0.0
        as: dependencies-block
        matches: /m:project/m:dependencies/m:dependency/m:version[../m:groupId='org.amqphub.spring'
          and ../m:artifactId='amqp-10-jms-spring-boot-starter' and not(contains(.,
          'redhat'))]
        in: pom.xml
    perform:
      iteration:
      - hint:
        - message: "Migrate `org.amqphub.spring:amqp-10-jms-spring-boot-starter` dependency
            to a version compatible with the supported versions of the RHOAR components
            provided in the link.\n                        "
          link:
          - value: ""
            title: Red Hat OpenShift Application Runtimes Spring Boot 2.1.6 Component
              Details - Supported Red Hat Components
            href: https://access.redhat.com/articles/4310921
          title: Migrate to a supported AMQP dependency
          category-id: optional
          effort: 1
        over: dependencies-block
  - when:
      xmlfile:
      - namespace:
        - value: ""
          prefix: m
          uri: http://maven.apache.org/POM/4.0.0
        as: dependencies-block
        matches: /m:project/m:dependencies/m:dependency/m:version[../m:groupId='org.apache.cxf'
          and ../m:artifactId='cxf-spring-boot-starter-jaxrs' and not(contains(.,
          'redhat'))]
        in: pom.xml
    perform:
      iteration:
      - hint:
        - message: "Migrate `org.apache.cxf:cxf-spring-boot-starter-jaxrs` dependency
            to a version compatible with the supported versions of the RHOAR components
            provided in the link.\n                        "
          link:
          - value: ""
            title: Red Hat OpenShift Application Runtimes Spring Boot 2.1.6 Component
              Details - Supported Red Hat Components
            href: https://access.redhat.com/articles/4310921
          title: Migrate to a supported CXF JAX-RS dependency
          category-id: optional
          effort: 1
        over: dependencies-block
  - when:
      xmlfile:
      - namespace:
        - value: ""
          prefix: m
          uri: http://maven.apache.org/POM/4.0.0
        as: dependencies-block
        matches: /m:project/m:dependencies/m:dependency/m:version[../m:groupId='org.jboss.resteasy'
          and ../m:artifactId='resteasy-spring-boot-starter' and not(contains(., 'redhat'))]
        in: pom.xml
    perform:
      iteration:
      - hint:
        - message: "Migrate `org.jboss.resteasy:resteasy-spring-boot-starter` dependency
            to a version compatible with the supported versions of the RHOAR components
            provided in the link.\n                        "
          link:
          - value: ""
            title: Red Hat OpenShift Application Runtimes Spring Boot 2.1.6 Component
              Details - Supported Red Hat Components
            href: https://access.redhat.com/articles/4310921
          title: Migrate to a supported RestEasy dependency
          category-id: optional
          effort: 1
        over: dependencies-block
  - when:
      xmlfile:
      - namespace:
        - value: ""
          prefix: m
          uri: http://maven.apache.org/POM/4.0.0
        as: dependencies-block
        matches: /m:project/m:dependencies/m:dependency/m:version[../m:groupId='org.infinispan'
          and ../m:artifactId='infinispan-spring-boot-starter-embedded' and not(contains(.,
          'redhat'))]
        in: pom.xml
    perform:
      iteration:
      - hint:
        - message: "Migrate `org.infinispan:infinispan-spring-boot-starter-embedded`
            dependency to a version compatible with the supported versions of the
            RHOAR components provided in the link.\n                        "
          link:
          - value: ""
            title: Red Hat OpenShift Application Runtimes Spring Boot 2.1.6 Component
              Details - Supported Red Hat Components
            href: https://access.redhat.com/articles/4310921
          title: Migrate to a supported Infinispan embedded dependency
          category-id: optional
          effort: 1
        over: dependencies-block
  - when:
      xmlfile:
      - namespace:
        - value: ""
          prefix: m
          uri: http://maven.apache.org/POM/4.0.0
        as: dependencies-block
        matches: /m:project/m:dependencies/m:dependency/m:version[../m:groupId='org.infinispan'
          and ../m:artifactId='infinispan-spring-boot-starter-remote' and not(contains(.,
          'redhat'))]
        in: pom.xml
    perform:
      iteration:
      - hint:
        - message: "Migrate `org.infinispan:infinispan-spring-boot-starter-remote`
            dependency to a version compatible with the supported versions of the
            RHOAR components provided in the link.\n                        "
          link:
          - value: ""
            title: Red Hat OpenShift Application Runtimes Spring Boot 2.1.6 Component
              Details - Supported Red Hat Components
            href: https://access.redhat.com/articles/4310921
          title: Migrate to a supported Infinispan remote dependency
          category-id: optional
          effort: 1
        over: dependencies-block
  - when:
      xmlfile:
      - namespace:
        - value: ""
          prefix: m
          uri: http://maven.apache.org/POM/4.0.0
        as: dependencies-block
        matches: /m:project/m:dependencies/m:dependency/m:version[../m:groupId='org.keycloak'
          and ../m:artifactId='keycloak-spring-boot-starter' and not(contains(., 'redhat'))]
        in: pom.xml
    perform:
      iteration:
      - hint:
        - message: "Migrate `org.keycloak:keycloak-spring-boot-starter` dependency
            to a version compatible with the supported versions of the RHOAR components
            provided in the link.\n                        "
          link:
          - value: ""
            title: Red Hat OpenShift Application Runtimes Spring Boot 2.1.6 Component
              Details - Supported Red Hat Components
            href: https://access.redhat.com/articles/4310921
          title: Migrate to a supported Keycloak dependency
          category-id: optional
          effort: 1
        over: dependencies-block
  - when:
      xmlfile:
      - namespace:
        - value: ""
          prefix: m
          uri: http://maven.apache.org/POM/4.0.0
        as: dependencies-block
        matches: /m:project/m:dependencies/m:dependency/m:version[../m:groupId='me.snowdrop'
          and ../m:artifactId='narayana-spring-boot-starter' and not(contains(., 'redhat'))]
        in: pom.xml
    perform:
      iteration:
      - hint:
        - message: "Migrate `me.snowdrop:narayana-spring-boot-starter` dependency
            to a version compatible with the supported versions of the RHOAR components
            provided in the link.\n                        "
          link:
          - value: ""
            title: Red Hat OpenShift Application Runtimes Spring Boot 2.1.6 Component
              Details - Supported Red Hat Components
            href: https://access.redhat.com/articles/4310921
          title: Migrate to a supported Narayana dependency
          category-id: optional
          effort: 1
        over: dependencies-block
  - when:
      xmlfile:
      - namespace:
        - value: ""
          prefix: m
          uri: http://maven.apache.org/POM/4.0.0
        as: dependencies-block
        matches: /m:project/m:dependencies/m:dependency/m:version[../m:groupId='io.opentracing.contrib'
          and ../m:artifactId='opentracing-spring-jaeger-web-starter' and not(contains(.,
          'redhat'))]
        in: pom.xml
    perform:
      iteration:
      - hint:
        - message: "Migrate `io.opentracing.contrib:opentracing-spring-jaeger-web-starter`
            dependency to a version compatible with the supported versions of the
            RHOAR components provided in the link.\n                        "
          link:
          - value: ""
            title: Red Hat OpenShift Application Runtimes Spring Boot 2.1.6 Component
              Details - Supported Red Hat Components
            href: https://access.redhat.com/articles/4310921
          title: Migrate to a supported Spring Jaeger dependency
          category-id: optional
          effort: 1
        over: dependencies-block
sourceFile: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/rhr/springboot/springboot-associated-artifacts.rhamt.xml
