metadata:
- description: "\n            This ruleset provides analysis with respect to generic
    changes to be applied to Java code to run on Apache Camel 3\n        "
  dependencies:
    addon:
    - id: org.jboss.windup.rules,windup-rules-java,3.0.0.Final
  sourceTechnology:
  - id: camel
    versionRange: '[2,3)'
  targetTechnology:
  - id: camel
    versionRange: '[3,)'
rules:
  rule:
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.processor.aggregate.AggregationStrategy
    perform:
      hint:
      - message: "\n                        The class `org.apache.camel.processor.aggregate.AggregationStrategy`
          has been moved to `org.apache.camel.AggregationStrategy`.\n                    "
        link:
        - value: ""
          title: 'Camel 3 - Migration Guide: Generic Information'
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_generic_information
        quickfix:
        - replacement: org.apache.camel.AggregationStrategy
          search: org.apache.camel.processor.aggregate.AggregationStrategy
          type: REPLACE
          name: AggregationStrategy-replace
        title: '`org.apache.camel.processor.aggregate.AggregationStrategy` has been
          moved'
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.impl.{SupportClass}
    perform:
      hint:
      - message: "\n                        The class `org.apache.camel.impl.{SupportClass}`
          has been moved to `org.apache.camel.support.{SupportClass}`. It has been
          moved out of `org.apache.camel:camel-core` and into `org.apache.camel:camel-support`.\n
          \                   "
        link:
        - value: ""
          title: 'Camel 3 - Migration Guide: Migrating custom Components'
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_migrating_custom_components
        quickfix:
        - replacement: org.apache.camel.support.
          search: org.apache.camel.impl.
          type: REPLACE
          name: Support-replace
        title: '`org.apache.camel.impl.{SupportClass}` has been moved'
        category-id: mandatory
        effort: 3
    where:
    - matches:
      - pattern: (BaseSelectorProducer|AsyncCallbackToCompletableFutureAdapter|BridgeExceptionHandlerToErrorHandler|DefaultAsyncProducer|DefaultComponent|DefaultConsumer|DefaultEndpoint|DefaultExchange|DefaultExchangeHolder|DefaultHeaderFilterStrategy|DefaultMessage|DefaultMessageHistory|DefaultPollingConsumerPollStrategy|DefaultPollingEndpoint|DefaultProducer|DefaultScheduledPollConsumer|DefaultScheduledPollConsumerScheduler|DefaultThreadPoolFactory|EventDrivenPollingConsumer|ExpressionAdapter|ExpressionComparator|ExpressionListComparator|ExpressionSupport|HeaderFilterStrategyComponent|HeaderSelectorProducer|LoggingExceptionHandler|MessageSupport|PollingConsumerSupport|ProcessorEndpoint|ProcessorPollingConsumer|ScheduledBatchPollingConsumer|ScheduledPollConsumer|ScheduledPollEndpoint|SimpleRegistry|SimpleUuidGeneratorSynchronizationAdapter|SynchronousDelegateProducer)
      param: SupportClass
  - when:
      javaclass:
      - location:
        - INHERITANCE
        references: org.apache.camel.builder.RouteBuilder
        as: routeBuilders
      or:
      - filecontent:
        - from: routeBuilders
          pattern: .zip({*})
        - from: routeBuilders
          pattern: .gzip({*})
    perform:
      iteration:
      - hint:
        - message: "`zip` and `gzip` dataformats were renamed to `zipdeflater and
            `gzipdeflater`\n                        "
          link:
          - value: ""
            title: Camel 3 - Migration Guide
            href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_zip_and_gzip_dataformat
          title: '`zip` and `gzip` dataformat was renamed'
          category-id: mandatory
          effort: 1
        over: default
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.impl.{registry}
        as: javaClass
    perform:
      iteration:
      - hint:
        - message: "\n                            The class `org.apache.camel.impl.{registry}`
            has been removed. Use `org.apache.camel.support.DefaultRegistry` instead.\n
            \                       "
          link:
          - value: ""
            title: 'Camel 3 - Migration Guide: Generic Information'
            href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_generic_information
          quickfix:
          - replacement: org.apache.camel.support.DefaultRegistry
            search: org.apache.camel.impl.PropertyPlaceholderDelegateRegistry
            type: REPLACE
            name: PropertyPlaceholderDelegateRegistry-replace
          - replacement: org.apache.camel.support.DefaultRegistry
            search: org.apache.camel.impl.CompositeRegistry
            type: REPLACE
            name: CompositeRegistry-replace
          title: '`org.apache.camel.impl.{registry}` has been removed.'
          category-id: mandatory
          effort: 1
      over: javaClass
    where:
    - matches:
      - pattern: (PropertyPlaceholderDelegateRegistry|CompositeRegistry)
      param: registry
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.processor.loadbalancer.SimpleLoadBalancerSupport
        as: javaClass
    perform:
      hint:
      - message: "\n                        The class `org.apache.camel.processor.loadbalancer.SimpleLoadBalancerSupport`
          has been removed. Use\n                        `org.apache.camel.processor.loadbalancer.LoadBalancerSupport`
          instead.\n                    "
        link:
        - value: ""
          title: 'Camel 3 - Migration Guide: Generic Information'
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_generic_information
        quickfix:
        - replacement: org.apache.camel.processor.loadbalancer.LoadBalancerSupport
          search: org.apache.camel.processor.loadbalancer.SimpleLoadBalancerSupport
          type: REPLACE
          name: LoadBalancer-replace
        title: '`org.apache.camel.processor.loadbalancer.SimpleLoadBalancerSupport`
          has been removed.'
        category-id: mandatory
        effort: 1
      over: javaClass
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.{removed}
        as: javaClass
    perform:
      hint:
      - message: "\n                        The class `org.apache.camel.{removed}`
          has been removed.\n                    "
        link:
        - value: ""
          title: 'Camel 3 - Migration Guide: Generic Information'
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_generic_information
        title: '`org.apache.camel.{removed}` has been removed.'
        category-id: mandatory
        effort: 1
      over: javaClass
    where:
    - matches:
      - pattern: (impl.FileWatcherReloadStrategy|support.ReloadStrategySupport)
      param: removed
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.util.toolbox.AggregationStrategies
    perform:
      hint:
      - message: "\n                        The class `org.apache.camel.util.toolbox.AggregationStrategies`
          has been moved to `org.apache.camel.builder.AggregationStrategies`.\n                    "
        link:
        - value: ""
          title: 'Camel 3 - Migration Guide: Generic Information'
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_generic_information
        quickfix:
        - replacement: org.apache.camel.builder.AggregationStrategies
          search: org.apache.camel.util.toolbox.AggregationStrategies
          type: REPLACE
          name: AggregationStrategies-replace
        title: '`org.apache.camel.util.toolbox.AggregationStrategies` has been moved'
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.management.JmxSystemPropertyKeys
    perform:
      hint:
      - message: "\n                        The class `org.apache.camel.management.JmxSystemPropertyKeys`
          has been moved to ` org.apache.camel.api.management.JmxSystemPropertyKeys`.\n
          \                   "
        link:
        - value: ""
          title: 'Camel 3 - Migration Guide: Generic Information'
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_generic_information
        quickfix:
        - replacement: ' org.apache.camel.api.management.JmxSystemPropertyKeys'
          search: org.apache.camel.management.JmxSystemPropertyKeys
          type: REPLACE
          name: AggregationStrategy-replace
        title: '`org.apache.camel.management.JmxSystemPropertyKeys` has been moved'
        category-id: mandatory
        effort: 1
  - when:
      filecontent:
      - pattern: .includeRoutes({*})
        filename: '{*}.java'
    perform:
      hint:
      - message: "`includeRoutes` method has been removed\n                        "
        link:
        - value: ""
          title: Camel 3 - Migration Guide
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_generic_information
        title: '`includeRoutes` method has been removed'
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.language.Bean
        as: annotations
    perform:
      hint:
      - message: Annotation `org.apache.camel.language.Bean` has been moved to `org.apache.camel.language.bean.Bean`
        link:
        - value: ""
          title: Camel 3 - Migration Guide
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_generic_information
        quickfix:
        - replacement: ' org.apache.camel.language.bean.Bean'
          search: org.apache.camel.language.Bean
          type: REPLACE
          name: AggregationStrategy-replace
        title: Annotation `org.apache.camel.language.Bean` method has been moved
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.language.Simple
        as: annotations
    perform:
      hint:
      - message: Annotation `org.apache.camel.language.Simple` has been moved to `org.apache.camel.language.simple.Simple`
        link:
        - value: ""
          title: Camel 3 - Migration Guide
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_generic_information
        quickfix:
        - replacement: org.apache.camel.language.simple.Simple
          search: org.apache.camel.language.Simple
          type: REPLACE
          name: Annotation-replace
        title: Annotation `org.apache.camel.language.Simple` method has been moved
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.language.SpEL
        as: annotations
    perform:
      hint:
      - message: Annotation `org.apache.camel.language.SpEL` has been moved to `org.apache.camel.language.spel.SpEL`
        link:
        - value: ""
          title: Camel 3 - Migration Guide
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_generic_information
        quickfix:
        - replacement: org.apache.camel.language.spel.SpEL
          search: org.apache.camel.language.SpEL
          type: REPLACE
          name: Annotation-replace
        title: Annotation `org.apache.camel.language.SpEL` method has been moved
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.{annotation}
        as: annotations
    perform:
      hint:
      - message: Annotation `org.apache.camel.{annotation}` has been moved to `org.apache.camel.spi.{annotation}`
        link:
        - value: ""
          title: Camel 3 - Migration Guide
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_generic_information
        quickfix:
        - replacement: org.apache.camel.spi.
          search: org.apache.camel.
          type: REPLACE
          name: AAnnotation-replace
        title: Annotation `org.apache.camel.{annotation}` has been moved
        category-id: mandatory
        effort: 1
    where:
    - matches:
      - pattern: (InvokeOnHeaders|InvokeOnHeader)
      param: annotation
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.Constant
        as: annotation
    perform:
      hint:
      - message: Annotation `org.apache.camel.Constant` has been removed. Use `@Simple`
          instead.`
        link:
        - value: ""
          title: Camel 3 - Migration Guide
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_generic_information
        quickfix:
        - replacement: org.apache.camel.language.simple.Simple
          search: org.apache.camel.Constant
          type: REPLACE
          name: Annotation-replace
        title: Annotation `org.apache.camel.Constant`has been removed
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.builder.xml.XPathBuilder
        as: class
    perform:
      hint:
      - message: Class `org.apache.camel.builder.xml.XPathBuilder` has been moved
          to `org.apache.camel.language.xpath.XPathBuilder`.
        link:
        - value: ""
          title: Camel 3 - Migration Guide
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_generic_information
        quickfix:
        - replacement: ' org.apache.camel.language.xpath.XPathBuilder'
          search: org.apache.camel.builder.xml.XPathBuilder
          type: REPLACE
          name: XPathBuilder-replace
        title: Annotation `org.apache.camel.builder.xml.XPathBuilder`has been moved
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.language.XPath
        as: annotations
    perform:
      hint:
      - message: Annotation `org.apache.camel.language.XPath` has been moved to `org.apache.camel.language.xpath.XPath`
        link:
        - value: ""
          title: Camel 3 - Migration Guide
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_generic_information
        quickfix:
        - replacement: org.apache.camel.language.xpath.XPath
          search: org.apache.camel.language.XPath
          type: REPLACE
          name: Xpath-Annotation-replace
        title: Annotation `org.apache.camel.language.XPath` has been moved
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.builder.xml.InvalidXPathExpression
        as: annotations
    perform:
      hint:
      - message: Exception `org.apache.camel.builder.xml.InvalidXPathExpression` has
          been moved to `org.apache.camel.language.xpath.InvalidXPathException `
        link:
        - value: ""
          title: Camel 3 - Migration Guide
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_generic_information
        quickfix:
        - replacement: org.apache.camel.language.xpath.InvalidXPathException
          search: ' org.apache.camel.builder.xml.InvalidXPathExpression'
          type: REPLACE
          name: InvalidXpatchExpression-Annotation-replace
        title: Exception `org.apache.camel.builder.xml.InvalidXPathExpression` has
          been moved
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.processor.validation.PredicateValidationException
        as: annotations
    perform:
      hint:
      - message: Exception `org.apache.camel.processor.validation.PredicateValidationException`
          has been moved to `org.apache.camel.support.processor.validation.PredicateValidationException`
        link:
        - value: ""
          title: Camel 3 - Migration Guide
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_generic_information
        quickfix:
        - replacement: org.apache.camel.support.processor.validation.PredicateValidationException
          search: ' org.apache.camel.processor.validation.PredicateValidationException'
          type: REPLACE
          name: PredicateValidationException-Annotation-replace
        title: Exception `org.apache.camel.processor.validation.PredicateValidationException`
          has been moved
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.apache.camel.util.toolbox.AggregationStrategies.xslt({*})
    perform:
      hint:
      - message: xslt method was removed from `org.apache.camel.util.toolbox.AggregationStrategies`.
          Instead use the `XsltAggregationStrategy` from `camel-xslt` JAR directly
        link:
        - value: ""
          title: Camel 3 - Migration Guide
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_generic_information
        title: xslt method was removed from `org.apache.camel.util.toolbox.AggregationStrategies`
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.language.LanguageAnnotation
    perform:
      hint:
      - message: The class `org.apache.camel.language.LanguageAnnotation` has been
          moved to `org.apache.camel.support.language.LanguageAnnotation`. It has
          been moved out of `org.apache.camel:camel-core` and into `org.apache.camel:camel-support`.
        link:
        - value: ""
          title: 'Camel 3 - Migration Guide: Migrating custom languages'
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_migrating_custom_languages
        quickfix:
        - replacement: org.apache.camel.support.language.LanguageAnnotation
          search: org.apache.camel.language.LanguageAnnotation
          type: REPLACE
          name: LanguageAnnotation-replace
        title: '`org.apache.camel.language.LanguageAnnotation` has been moved'
        category-id: mandatory
        effort: 1
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.util.{moved}
        as: javaClass
    perform:
      iteration:
      - hint:
        - message: The class `org.apache.camel.util.{moved}` has been moved to `org.apache.camel.support.{moved}`.
            It has been moved out of `org.apache.camel:camel-core` and into `org.apache.camel:camel-support`
          link:
          - value: ""
            title: 'Camel 3 - Migration Guide: Helpers and Support'
            href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_helpers_and_support
          quickfix:
          - replacement: org.apache.camel.support
            search: org.apache.camel.util
            type: REPLACE
            name: camel.helpers-replace
          title: '`org.apache.camel.util.{moved}` has been moved.'
          category-id: mandatory
          effort: 1
        over: javaClass
    where:
    - matches:
      - pattern: (AsyncProcessorHelper|AsyncProcessorConverterHelper|EndpointHelper|EventHelper|ExchangeHelper|GZIPHelper|JsonSchemaHelper|MessageHelper|PlatformHelper|PredicateAssertHelper|ResolverHelper|ResourceHelper|UnitOfWorkHelper)
      param: moved
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.util.ServiceHelper
        as: javaClass
    perform:
      iteration:
      - hint:
        - message: The class `org.apache.camel.util.ServiceHelper` has been moved
            to `org.apache.camel.support.service.ServiceHelper`. It has been moved
            out of `org.apache.camel:camel-core` and into `org.apache.camel:camel-api`
          link:
          - value: ""
            title: 'Camel 3 - Migration Guide: Helpers and Support'
            href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_helpers_and_support
          quickfix:
          - replacement: org.apache.camel.support.service.ServiceHelper
            search: org.apache.camel.util.ServiceHelper
            type: REPLACE
            name: camel.ServiceHelper-replace
          title: '`org.apache.camel.util.ServiceHelper` has been moved.'
          category-id: mandatory
          effort: 1
        over: javaClass
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.spi.RestProducerFactoryHelper
        as: javaClass
    perform:
      iteration:
      - hint:
        - message: The class `org.apache.camel.spi.RestProducerFactoryHelper` has
            been moved to `org.apache.camel.support.RestProducerFactoryHelper`. It
            has been moved out of `org.apache.camel:camel-core` and into `org.apache.camel:camel-support`
          link:
          - value: ""
            title: 'Camel 3 - Migration Guide: Helpers and Support'
            href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_helpers_and_support
          quickfix:
          - replacement: org.apache.camel.support.RestProducerFactoryHelper
            search: org.apache.camel.spi.RestProducerFactoryHelper
            type: REPLACE
            name: camel.RestProducerFactoryHelper-replace
          title: '`org.apache.camel.spi.RestProducerFactoryHelper` has been moved.'
          category-id: mandatory
          effort: 1
        over: javaClass
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.util.ObjectHelper
        as: javaClass
    perform:
      iteration:
      - hint:
        - message: 'The class `org.apache.camel.util.ObjectHelper` has been moved
            out of the `org.apache.camel:camel-core` and has been split into two classes:
            `org.apache.camel.support.ObjectHelper` (`org.apache.camel:camel-support`)
            and `org.apache.camel.util.ObjectHelper` (`org.apache.camel:camel-util`).
            This has been done to isolate the methods using `org.apache.camel:camel-api`.'
          link:
          - value: ""
            title: 'Camel 3 - Migration Guide: Helpers and Support'
            href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_helpers_and_support
          title: '`org.apache.camel.util.ObjectHelper` has been moved.'
          category-id: mandatory
          effort: 1
        over: javaClass
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.support.RoutePolicySupport
        as: javaClass
    perform:
      iteration:
      - hint:
        - message: The class `org.apache.camel.support.RoutePolicySupport` has been
            moved out of `org.apache.camel:camel-core` and into `org.apache.camel:camel-support`.
            The return type from `startConsumer` and `stopConsumer` has been changed
            from boolean to void as they always returned true before.
          link:
          - value: ""
            title: 'Camel 3 - Migration Guide: Route Policies'
            href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_route_policies
          title: '`org.apache.camel.support.RoutePolicySupport` has been moved.'
          category-id: mandatory
          effort: 1
        over: javaClass
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.impl.ThrottlingInflightRoutePolicy
        as: javaClass
    perform:
      iteration:
      - hint:
        - message: The class `org.apache.camel.impl.ThrottlingInflightRoutePolicy`
            has been moved to `org.apache.camel.throttling.ThrottlingInflightRoutePolicy`.
            It has been moved out of `org.apache.camel:camel-core` and into `org.apache.camel:camel-base`.
          link:
          - value: ""
            title: 'Camel 3 - Migration Guide: Route Policies'
            href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_route_policies
          quickfix:
          - replacement: org.apache.camel.throttling.ThrottlingInflightRoutePolicy
            search: org.apache.camel.impl.ThrottlingInflightRoutePolicy
            type: REPLACE
            name: camel.ThrottlingInflightRoutePolicy-replace
          title: '`org.apache.camel.impl.ThrottlingInflightRoutePolicy` has been moved.'
          category-id: mandatory
          effort: 1
        over: javaClass
  - when:
      or:
      - javaclass:
        - location:
          - IMPORT
          references: org.apache.camel.processor.idempotent.{moved}
    perform:
      hint:
      - message: "\n                        The class `org.apache.camel.processor.idempotent.{moved}`
          has been moved to `org.apache.camel.support.processor.idempotent.{moved}`.
          It has been moved out of `org.apache.camel:camel-core` and into `org.apache.camel:camel-support`.\n
          \                   "
        link:
        - value: ""
          title: 'Camel 3 - Migration Guide: Idempotent repositories'
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_idempotent_repositories
        title: '`org.apache.camel.processor.idempotent.{moved}` has been moved'
        category-id: mandatory
        effort: 1
    where:
    - matches:
      - pattern: (FileIdempotentRepository|MemoryIdempotentRepository)
      param: moved
  - when:
      javaclass:
      - location:
        - IMPORT
        references: org.apache.camel.FallbackConverter
    perform:
      hint:
      - message: Annotation `org.apache.camel.FallbackConverter` has been removed.
          You should use `@org.apache.camel.Converter(fallback = true)` from `org.apache.camel:camel-api`
          instead. You can also set `@org.apache.camel.Converter(generateLoader =
          true)` on the converter class to allow Camel to generate source code for
          loading type converters in a faster way.
        link:
        - value: ""
          title: 'Camel 3 - Migration Guide: Fallback Type Converters'
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_fallback_type_converters
        title: Annotation `org.apache.camel.FallbackConverter` has been removed
        category-id: mandatory
        effort: 1
  - when:
      or:
      - javaclass:
        - location:
          - IMPORT
          references: org.apache.camel.util.toolbox.XsltAggregationStrategy
        xmlfile:
        - namespace:
          - value: ""
            prefix: c
            uri: http://www.springframework.org/schema/beans
          matches: //*/c:bean/@class[windup:matches(self::node(), 'org.apache.camel.util.toolbox.XsltAggregationStrategy')]
        - namespace:
          - value: ""
            prefix: c
            uri: http://www.osgi.org/xmlns/blueprint/v1.0.0
          matches: //*/c:bean/@class[windup:matches(self::node(), 'org.apache.camel.util.toolbox.XsltAggregationStrategy')]
    perform:
      hint:
      - message: The class `org.apache.camel.util.toolbox.XsltAggregationStrategy`
          has been moved to `org.apache.camel.component.xslt.XsltAggregationStrategy`.
          It has been moved out of `org.apache.camel:camel-core` and into `org.apache.camel:camel-xslt`.
          When using the option `groupedExchange` on the `aggregator` EIP, the output
          of the aggregation is no longer stored in the exchange property `Exchange.GROUPED_EXCHANGE`.
          This behaviour was already deprecated from Camel 2.13 onwards.
        link:
        - value: ""
          title: 'Camel 3 - Migration Guide: Aggregation'
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_aggregation
        title: '`org.apache.camel.util.toolbox.XsltAggregationStrategy` has been moved.'
        category-id: mandatory
        effort: 1
  - when:
      or:
      - javaclass:
        - location:
          - METHOD_CALL
          references: org.apache.camel.CamelContext.{get|set}Propert{y|ies}({*})
        xmlfile:
        - namespace:
          - value: ""
            prefix: c
            uri: http://camel.apache.org/schema/spring
          matches: //c:camelContext/c:properties
        - namespace:
          - value: ""
            prefix: c
            uri: http://camel.apache.org/schema/blueprint
          matches: //c:camelContext/c:properties
    perform:
      hint:
      - message: The `getProperties` and `setProperty` methods have been removed from
          `org.apache.camel.CamelContext`. Please use `getGlobalOptions` and `setGlobalOptions`
          instead
        link:
        - value: ""
          title: 'Camel 3 - Migration Guide: CONFIGURING GLOBAL OPTIONS ON CAMELCONTEXT'
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_configuring_global_options_on_camelcontext
        title: '`org.apache.camel.CamelContext` property methods have been removed.'
        category-id: mandatory
        effort: 1
  - when:
      project:
      - artifact:
          groupId: org.apache.camel
          artifactId: camel-fhir
          toVersion: "2"
    perform:
      hint:
      - message: The default FHIR specification in the `org.apache.camel:camel-fhir`
          artifact has changed from DSTU3 to R4. Therefore if DSTU3 is desired it
          has to be explicitly set.
        link:
        - value: ""
          title: 'Camel 3 - Migration Guide: FHIR'
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_fhir
        title: '`org.apache.camel:camel-fhir` default FHIR specification has changed
          from DSTU3 to R4'
        category-id: information
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.apache.camel.CamelContext.{method}({*})
    perform:
      hint:
      - message: "The method `org.apache.camel.CamelContext.{method}` has been moved
          to `org.apache.camel.api.management.ManagedCamelContext.{method}`. You can
          access it by adapting your CamelContext like so:\n\n                        `ManagedCamelContext
          managed = context.adapt(ManagedCamelContext.class);`\n                        `managed.{method}(...);`\n\n
          \                    If you want JMX to be enabled out of the box, `org.apache.camel:camel-management`
          needs to be on the classpath.\n                    "
        link:
        - value: ""
          title: Camel 3 - Managed Camel Context
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_jmx
        title: The methods on `CamelContext` that are related to JMX has been moved
          into a new `ManagedCamelContext` interface present in the `org.apache.camel:camel-management-api`
          artifact
        category-id: mandatory
        effort: 1
    where:
    - matches:
      - pattern: (getManagedCamelContext|getManagedProcessor|getManagedRoute)
      param: method
  - when:
      or:
      - javaclass:
        - location:
          - METHOD_CALL
          references: org.apache.camel.language.simple.SimpleLanguage.{languageMethods}({*})
        - location:
          - METHOD_CALL
          references: org.apache.camel.language.simple.SimpleTokenizer.{tokenizerMethods})({*})
        xmlfile:
        - namespace:
          - value: ""
            prefix: c
            uri: http://www.springframework.org/schema/beans
          matches: //c:bean[@class='org.apache.camel.language.simple.SimpleLanguage']/c:property[@name='functionStartToken'
            or @name='functionEndToken']
        - namespace:
          - value: ""
            prefix: c
            uri: http://www.osgi.org/xmlns/blueprint/v1.0.0
          matches: //c:bean[@class='org.apache.camel.language.simple.SimpleLanguage']/c:property[@name='functionStartToken'
            or @name='functionEndToken']
    perform:
      hint:
      - message: The functionality to change the simple language tokens for start/end
          functions has been removed. The default tokens with `${xxx}` and `$simple{xxx}`
          is now hardcoded (optimized). The functionality to change these tokens was
          never really in use and would only confuse Camel users if a new syntax was
          used.
        link:
        - value: ""
          title: 'Camel 3 - Migration Guide: Simple Language'
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_simple_language
        title: The functionality to change the simple language tokens for start/end
          functions has been removed.
        category-id: mandatory
        effort: 1
    where:
    - matches:
      - pattern: (changeFunctionStartToken|changeFunctionEndToken)
      param: tokenizerMethods
    - matches:
      - pattern: (changeFunctionStartToken|changeFunctionEndToken|setFunctionStartToken|setFunctionEndToken)
      param: languageMethods
  - when:
      javaclass:
      - location:
        - ANNOTATION
        annotation-literal:
          name: uri
          pattern: '{*}'
        references: org.apache.camel.{class}
    perform:
      hint:
      - message: The `uri` attribute in the @{class} annotation has been deprecated.
          Instead use `value`, which allows a shorthand style, from using `@{class}(uri
          = "jms:cheese")` to `@{class}("jms:cheese")`.
        link:
        - value: ""
          title: Camel 3 - Pojo Annotations
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_pojo_annotations
        title: '@{class}: `uri` attribute has been deprecated'
        category-id: optional
    where:
    - matches:
      - pattern: (Consume|EndpointInject|Produce)
      param: class
  - when:
      javaclass:
      - location:
        - ANNOTATION
        annotation-literal:
          name: ref
          pattern: '{*}'
        references: org.apache.camel.{class}
    perform:
      hint:
      - message: The `ref` attribute in the @{class} annotation has been removed.
          Instead use the `ref` component in the `value` attribute, e.g @{class}("ref:myName").
        link:
        - value: ""
          title: Camel 3 - Pojo Annotations
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_pojo_annotations
        title: '@{class}: `ref` attribute has been removed'
        category-id: mandatory
        effort: 1
    where:
    - matches:
      - pattern: (Consume|EndpointInject|Produce)
      param: class
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.apache.camel.CamelContext.{method}({*})
    perform:
      hint:
      - message: "The method `org.apache.camel.CamelContext.{method}` has moved to
          `org.apache.camel.CatalogCamelContext.{method}`. You can access it by adapting
          your `CamelContext` like so:\n\n                        `CatalogCamelContext
          ccc = context.adapt(CatalogCamelContext.class);`\n                        `ccc.{method}(...);`\n
          \                   "
        link:
        - value: ""
          title: Camel 3 - Catalog Camel Context
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_camelcontext
        title: The methods on `CamelContext` that are related to the catalog have
          been moved into a new `CatalogCamelContext` interface
        category-id: mandatory
        effort: 1
    where:
    - matches:
      - pattern: (getComponentParameterJsonSchema|getDataFormatParameterJsonSchema|getLanguageParameterJsonSchema|getEipParameterJsonSchema)
      param: method
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.apache.camel.CamelContext.{method}({*})
    perform:
      hint:
      - message: "The duplicate method `org.apache.camel.CamelContext.{method}` has
          been removed. You should use the `static` method `org.apache.camel.model.ModelHelper{method}`
          instead.\n                    "
        link:
        - value: ""
          title: Camel 3 - Catalog Camel Context
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_camelcontext
        title: The duplicate method `org.apache.camel.CamelContext.{method}` has been
          removed
        category-id: mandatory
        effort: 1
    where:
    - matches:
      - pattern: (loadRoutesDefinition|loadRestsDefinition)
      param: method
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.apache.camel.CamelContext.{method}({*})
    perform:
      hint:
      - message: "The method `org.apache.camel.CamelContext.{method}` has been moved
          to `org.apache.camel.model.Model.{method}`. You can access it by adapting
          your `CamelContext` like so:\n\n                        `ModelCamelContext
          ccc = context.adapt(ModelCamelContext.class);`\n                        `mcc.{method}(...);`\n
          \                   "
        link:
        - value: ""
          title: Camel 3 - Model Camel Context
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_modelcamelcontext
        title: The methods on `CamelContext` that are related to the routes model
          have been moved into a new `Model` interface
        category-id: mandatory
        effort: 1
    where:
    - matches:
      - pattern: (getRouteDefinitions|getRouteDefinition|addRouteDefinitions|addRouteDefinition|removeRouteDefinitions|removeRouteDefinition|getRestDefinitions|addRestDefinitions|setDataFormats|getDataFormats|resolveDataFormatDefinition|getProcessorDefinition|setValidators|getHystrixConfiguration|setHystrixConfiguration|setHystrixConfigurations|addHystrixConfiguration|getValidators|setTransformers|getTransformers|addServiceCallConfiguration|setServiceCallConfigurations|setServiceCallConfiguration|getServiceCallConfiguration)
      param: method
  - when:
      javaclass:
      - location:
        - METHOD_CALL
        references: org.apache.camel.CamelContext.{method}({*})
    perform:
      hint:
      - message: "The method `org.apache.camel.CamelContext.{method}` has been moved
          to `org.apache.camel.ExtendedCamelContext.{method}`. You can access it by
          adapting your `CamelContext` like so:\n\n                        `ExtendedCamelContext
          ecc = context.adapt(ExtendedCamelContext.class);`\n                        `ecc.{method}(...);`\n
          \                   "
        link:
        - value: ""
          title: Camel 3 - Extended Camel Context
          href: https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_extended_camelcontext
        title: The methods on `CamelContext` that are intended for advanced use cases
          have been moved into a new `ExtendedCamelContext` interface
        category-id: mandatory
        effort: 1
    where:
    - matches:
      - pattern: (setupRoutes|isSetupRoutes|getRouteStartupOrder|getManagementMBeanAssembler|addInterceptStrategy|getInterceptStrategies|getErrorHandlerExecutorService|getDataFormatResolver|setDataFormatResolver|getDefaultFactoryFinder|setFactoryFinderResolver|getFactoryFinder|getPackageScanClassResolver|setPackageScanClassResolver|setNodeIdFactory|getNodeIdFactory|getAsyncProcessorAwaitManager|setAsyncProcessorAwaitManager|getProcessorFactory|setProcessorFactory|getUnitOfWorkFactory|setUnitOfWorkFactory|getModelJAXBContextFactory|setModelJAXBContextFactory|getLogListeners|addLogListener)
      param: method
sourceFile: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/camel3/camel2/java-generic-information.windup.xml
