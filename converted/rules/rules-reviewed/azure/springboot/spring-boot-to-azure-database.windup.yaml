metadata:
- description: "\n            For any database, identify the connection string.\n
    \       "
  dependencies:
    addon:
    - id: org.jboss.windup.rules,windup-rules-xml,3.0.0.Final
  sourceTechnology:
  - id: springboot
  targetTechnology:
  - id: azure-appservice
  - id: azure-aks
  - id: azure-container-apps
  tag:
  - database
rules:
  rule:
  - when:
      filecontent:
      - pattern: 'jdbc:'
        filename: application{*}.{extensions}
    perform:
      hint:
      - message: "\n                        \n                        The application
          uses a JDBC connection string.\n\n                        Checkout the different
          types of databases that are fully managed on Azure.\n                        \n
          \                   "
        link:
        - value: ""
          title: JDBC connection string found in configuration file
          href: https://docs.microsoft.com/azure/developer/java/migration/migrate-spring-boot-to-app-service#databases
        - value: ""
          title: Types of Databases on Azure
          href: https://azure.microsoft.com/product-categories/databases/
        - value: ""
          title: Use Spring Data JDBC with Azure Database for MySQL
          href: https://docs.microsoft.com/azure/developer/java/spring-framework/configure-spring-data-jdbc-with-azure-mysql
        - value: ""
          title: Use Spring Data JDBC with Azure Database for PostgreSQL
          href: https://docs.microsoft.com/azure/developer/java/spring-framework/configure-spring-data-jdbc-with-azure-postgresql
        - value: ""
          title: Use Spring Data JDBC with Azure SQL Database
          href: https://docs.microsoft.com/azure/developer/java/spring-framework/configure-spring-data-jdbc-with-azure-sql-server
        tag:
        - jdbc
        title: JDBC connection found in configuration file
        category-id: information
    where:
    - matches:
      - pattern: (properties|yaml|yml)
      param: extensions
  - when:
      filecontent:
      - pattern: 'mongodb:'
        filename: application{*}.{extensions}
    perform:
      hint:
      - message: "\n                        \n                        The application
          uses a MongoDB connection string.\n\n                        Checkout the
          different types of databases that are fully managed on Azure.\n                        \n
          \                       "
        link:
        - value: ""
          title: MongoDB connection string found in configuration file
          href: https://docs.microsoft.com/azure/developer/java/migration/migrate-spring-boot-to-app-service#databases
        - value: ""
          title: Types of Databases on Azure
          href: https://azure.microsoft.com/product-categories/databases/
        - value: ""
          title: How to use Spring Data MongoDB API with Azure Cosmos DB
          href: https://docs.microsoft.com/azure/developer/java/spring-framework/configure-spring-data-mongodb-with-cosmos-db
        - value: ""
          title: Spring Cloud Azure Starter Data Cosmos DB
          href: https://search.maven.org/artifact/com.azure.spring/spring-cloud-azure-starter-data-cosmos
        tag:
        - mongodb
        title: MongoDB connection found in configuration file
        category-id: information
    where:
    - matches:
      - pattern: (properties|yaml|yml)
      param: extensions
sourceFile: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/azure/springboot/spring-boot-to-azure-database.windup.xml
